(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[32],{"1FcE":function(e,t,n){"use strict";n.r(t),n.d(t,"CompletionContext",(function(){return l})),n.d(t,"acceptCompletion",(function(){return F})),n.d(t,"autocompletion",(function(){return pe})),n.d(t,"clearSnippet",(function(){return ne})),n.d(t,"closeCompletion",(function(){return z})),n.d(t,"completeAnyWord",(function(){return he})),n.d(t,"completeFromList",(function(){return h})),n.d(t,"completionKeymap",(function(){return de})),n.d(t,"completionStatus",(function(){return ue})),n.d(t,"currentCompletions",(function(){return me})),n.d(t,"ifNotIn",(function(){return p})),n.d(t,"moveCompletionSelection",(function(){return D})),n.d(t,"nextSnippetField",(function(){return ie})),n.d(t,"prevSnippetField",(function(){return se})),n.d(t,"snippet",(function(){return ee})),n.d(t,"snippetCompletion",(function(){return le})),n.d(t,"snippetKeymap",(function(){return oe})),n.d(t,"startCompletion",(function(){return $}));var i=n("4eob"),s=n("uZp5"),r=n("AtEE"),o=n("fK0Z"),a=n("yqQ+");class l{constructor(e,t,n){this.state=e,this.pos=t,this.explicit=n,this.abortListeners=[]}tokenBefore(e){let t=Object(a.syntaxTree)(this.state).resolve(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),i=t.text.slice(n-t.from,this.pos-t.from),s=i.search(u(e,!1));return s<0?null:{from:n+s,to:this.pos,text:i.slice(s)}}get aborted(){return null==this.abortListeners}addEventListener(e,t){"abort"==e&&this.abortListeners&&this.abortListeners.push(t)}}function c(e){let t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),`[${n?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function h(e){let t=e.map((e=>"string"==typeof e?{label:e}:e)),[n,i]=t.every((e=>/^\w+$/.test(e.label)))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),n=Object.create(null);for(let{label:s}of e){t[s[0]]=!0;for(let e=1;e<s.length;e++)n[s[e]]=!0}let i=c(t)+c(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}(t);return e=>{let s=e.matchBefore(i);return s||e.explicit?{from:s?s.from:e.pos,options:t,span:n}:null}}function p(e,t){return n=>{for(let t=Object(a.syntaxTree)(n.state).resolve(n.pos,-1);t;t=t.parent)if(e.indexOf(t.name)>-1)return null;return t(n)}}class d{constructor(e,t,n){this.completion=e,this.source=t,this.match=n}}function f(e){return e.selection.main.head}function u(e,t){var n;let{source:i}=e,s=t&&"^"!=i[0],r="$"!=i[i.length-1];return s||r?new RegExp(`${s?"^":""}(?:${i})${r?"$":""}`,null!==(n=e.flags)&&void 0!==n?n:e.ignoreCase?"i":""):e}function m(e,t){let n=t.completion.apply||t.completion.label,i=t.source;"string"==typeof n?e.dispatch({changes:{from:i.from,to:i.to,insert:n},selection:{anchor:i.from+n.length}}):n(e,t.completion,i.from,i.to)}const g=new WeakMap;function k(e){if(!Array.isArray(e))return e;let t=g.get(e);return t||g.set(e,t=h(e)),t}class x{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let n=Object(s.b)(e,t),i=Object(s.c)(n);this.chars.push(n);let r=e.slice(t,t+i),o=r.toUpperCase();this.folded.push(Object(s.b)(o==r?r.toLowerCase():o,0)),t+=i}this.astral=e.length!=this.chars.length}match(e){if(0==this.pattern.length)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:i,precise:r,byWord:o}=this;if(1==t.length){let i=Object(s.b)(e,0);return i==t[0]?[0,0,Object(s.c)(i)]:i==n[0]?[-200,0,Object(s.c)(i)]:null}let a=e.indexOf(this.pattern);if(0==a)return[0,0,this.pattern.length];let l=t.length,c=0;if(a<0){for(let r=0,o=Math.min(e.length,200);r<o&&c<l;){let o=Object(s.b)(e,r);o!=t[c]&&o!=n[c]||(i[c++]=r),r+=Object(s.c)(o)}if(c<l)return null}let h=0,p=0,d=!1,f=0,u=-1,m=-1,g=/[a-z]/.test(e);for(let k=0,x=Math.min(e.length,200),b=0;k<x&&p<l;){let i=Object(s.b)(e,k);a<0&&(h<l&&i==t[h]&&(r[h++]=k),f<l&&(i==t[f]||i==n[f]?(0==f&&(u=k),m=k,f++):f=0));let c,x=i<255?i>=48&&i<=57||i>=97&&i<=122?2:i>=65&&i<=90?1:0:(c=Object(s.g)(i))!=c.toLowerCase()?1:c!=c.toUpperCase()?2:0;(1==x&&g||0==b&&0!=x)&&(t[p]==i||n[p]==i&&(d=!0))&&(o[p++]=k),b=x,k+=Object(s.c)(i)}return p==l&&0==o[0]?this.result((d?-200:0)-100,o,e):f==l&&0==u?[-200,0,m]:a>-1?[-700,a,a+this.pattern.length]:f==l?[-900,u,m]:p==l?this.result((d?-200:0)-100-700,o,e):2==t.length?null:this.result((i[0]?-700:0)-200-1100,i,e)}result(e,t,n){let i=[e],r=1;for(let o of t){let e=o+(this.astral?Object(s.c)(Object(s.b)(n,o)):1);r>1&&i[r-1]==o?i[r-1]=e:(i[r++]=o,i[r++]=e)}return i}}const b=i.Facet.define({combine:e=>Object(i.combineConfig)(e,{activateOnTyping:!0,override:null,maxRenderedOptions:100,defaultKeymap:!0},{defaultKeymap:(e,t)=>e&&t})}),v=r.EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{cursor:"pointer",padding:"1px 1em 1px 3px",lineHeight:1.2},"& > li[aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"}}},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xb7\xb7\xb7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25cb'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25cc'"}},".cm-completionIcon-variable":{"&:after":{content:"'\ud835\udc65'"}},".cm-completionIcon-constant":{"&:after":{content:"'\ud835\udc36'"}},".cm-completionIcon-type":{"&:after":{content:"'\ud835\udc61'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222a'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25a1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\ud83d\udd11\ufe0e'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25a2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});function w(e,t,n){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true");for(let s=n.from;s<n.to;s++){let{completion:n,match:r}=e[s];const o=i.appendChild(document.createElement("li"));o.id=t+"-"+s;let a=o.appendChild(document.createElement("div"));a.classList.add("cm-completionIcon"),n.type&&a.classList.add(...n.type.split(/\s+/g).map((e=>"cm-completionIcon-"+e))),a.setAttribute("aria-hidden","true");let l=o.appendChild(document.createElement("span"));l.className="cm-completionLabel";let{label:c,detail:h}=n,p=0;for(let e=1;e<r.length;){let t=r[e++],n=r[e++];t>p&&l.appendChild(document.createTextNode(c.slice(p,t)));let i=l.appendChild(document.createElement("span"));i.appendChild(document.createTextNode(c.slice(t,n))),i.className="cm-completionMatchedText",p=n}if(p<c.length&&l.appendChild(document.createTextNode(c.slice(p))),h){let e=o.appendChild(document.createElement("span"));e.className="cm-completionDetail",e.textContent=h}o.setAttribute("role","option")}return n.from&&i.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}function y(e,t,n){if(e<=n)return{from:0,to:e};if(t<=e>>1){let e=Math.floor(t/n);return{from:e*n,to:(e+1)*n}}let i=Math.floor((e-t)/n);return{from:e-(i+1)*n,to:e-i*n}}class S{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:e=>this.positionInfo(e),key:this};let n=e.state.field(t),{options:i,selected:s}=n.open,r=e.state.facet(b);this.range=y(i.length,s,r.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",(t=>{for(let n,s=t.target;s&&s!=this.dom;s=s.parentNode)if("LI"==s.nodeName&&(n=/-(\d+)$/.exec(s.id))&&+n[1]<i.length)return m(e,i[+n[1]]),void t.preventDefault()})),this.list=this.dom.appendChild(w(i,n.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=y(t.options.length,t.selected,this.view.state.facet(b).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(w(t.options,e.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let e=t.options[t.selected];e.completion.info&&(this.info=this.dom.appendChild(function(e,t){let n=document.createElement("div");n.className="cm-tooltip cm-completionInfo";let{info:i}=e.completion;if("string"==typeof i)n.textContent=i;else{let s=i(e.completion);s.then?s.then((e=>n.appendChild(e)),(e=>Object(r.logException)(t.state,e,"completion info"))):n.appendChild(s)}return n}(e,this.view)),this.view.requestMeasure(this.placeInfo))}}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,i=this.range.from;n;n=n.nextSibling,i++)i==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return t&&function(e,t){let n=e.getBoundingClientRect(),i=t.getBoundingClientRect();i.top<n.top?e.scrollTop-=n.top-i.top:i.bottom>n.bottom&&(e.scrollTop+=i.bottom-n.bottom)}(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e)return null;let t=this.dom.getBoundingClientRect(),n=e.getBoundingClientRect().top-t.top;if(n<0||n>this.list.clientHeight-10)return null;let i=this.view.textDirection==r.Direction.RTL,s=t.left,o=innerWidth-t.right;return i&&s<Math.min(300,o)?i=!1:!i&&o<Math.min(300,s)&&(i=!0),{top:n,left:i}}positionInfo(e){this.info&&e&&(this.info.style.top=e.top+"px",this.info.classList.toggle("cm-completionInfo-left",e.left),this.info.classList.toggle("cm-completionInfo-right",!e.left))}}function C(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}class L{constructor(e,t,n,i,s){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=i,this.selected=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new L(this.options,E(t,e),this.tooltip,this.timestamp,e)}static build(e,t,n,i){let s=function(e,t){let n=[];for(let r of e)if(r.hasResult()){let e,i=new x(t.sliceDoc(r.from,r.to));for(let t of r.result.options)(e=i.match(t.label))&&(null!=t.boost&&(e[0]+=t.boost),n.push(new d(t,r,e)))}n.sort(M);let i=[],s=null;for(let r of n.sort(M)){if(300==i.length)break;s&&s.label==r.completion.label&&s.detail==r.completion.detail?C(r.completion)>C(s)&&(i[i.length-1]=r):i.push(r),s=r.completion}return i}(e,t);if(!s.length)return null;let r=0;if(i&&i.selected){let e=i.options[i.selected].completion;for(let t=0;t<s.length&&!r;t++)s[t].completion==e&&(r=t)}return new L(s,E(n,r),{pos:e.reduce(((e,t)=>t.hasResult()?Math.min(e,t.from):e),1e8),create:(o=j,e=>new S(e,o))},i?i.timestamp:Date.now(),r);var o}map(e){return new L(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class T{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new T(I,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,n=t.facet(b),i=(n.override||t.languageDataAt("autocomplete",f(t)).map(k)).map((t=>(this.active.find((e=>e.source==t))||new P(t,this.active.some((e=>0!=e.state))?1:0,!1)).update(e,n)));i.length==this.active.length&&i.every(((e,t)=>e==this.active[t]))&&(i=this.active);let s=e.selection||i.some((t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to)))||!function(e,t){if(e==t)return!0;for(let n=0,i=0;;){for(;n<e.length&&!e[n].hasResult;)n++;for(;i<t.length&&!t[i].hasResult;)i++;let s=n==e.length,r=i==t.length;if(s||r)return s==r;if(e[n++].result!=t[i++].result)return!1}}(i,this.active)?L.build(i,t,this.id,this.open):this.open&&e.docChanged?this.open.map(e.changes):this.open;!s&&i.every((e=>1!=e.state))&&i.some((e=>e.hasResult()))&&(i=i.map((e=>e.hasResult()?new P(e.source,0,!1):e)));for(let r of e.effects)r.is(R)&&(s=s&&s.setSelected(r.value,this.id));return i==this.active&&s==this.open?this:new T(i,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:A}}function E(e,t){return{"aria-autocomplete":"list","aria-activedescendant":e+"-"+t,"aria-owns":e}}const A={"aria-autocomplete":"list"},I=[];function M(e,t){let n=t.match[0]-e.match[0];if(n)return n;let i=e.completion.label,s=t.completion.label;return i<s?-1:i==s?0:1}class P{constructor(e,t,n){this.source=e,this.state=t,this.explicit=n}hasResult(){return!1}explicitAt(e){return this.explicit}update(e,t){let n=e.annotation(i.Transaction.userEvent),s=this;"input"==n||"delete"==n?s=s.handleUserEvent(e,n,t):e.docChanged?s=s.handleChange(e):e.selection&&0!=s.state&&(s=new P(s.source,0,!1));for(let i of e.effects)if(i.is(H))s=new P(s.source,1,i.value);else if(i.is(O))s=new P(s.source,0,!1);else if(i.is(N))for(let e of i.value)e.source==s.source&&(s=e);return s}handleUserEvent(e,t,n){return"delete"!=t&&n.activateOnTyping?new P(this.source,1,!1):this}handleChange(e){return e.changes.touchesRange(f(e.startState))?new P(this.source,0,!1):this}}class B extends P{constructor(e,t,n,i,s,r){super(e,2,t>-1),this.explicitPos=t,this.result=n,this.from=i,this.to=s,this.span=r}hasResult(){return!0}explicitAt(e){return this.explicitPos==e}mapExplicit(e){return this.explicitPos<0?-1:e.mapPos(this.explicitPos)}handleUserEvent(e,t,n){let i=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),r=f(e.state);return(this.explicit?r<i:r<=i)||r>s?new P(this.source,"input"==t&&n.activateOnTyping?1:0,!1):this.span&&(i==s||this.span.test(e.state.sliceDoc(i,s)))?new B(this.source,this.mapExplicit(e.changes),this.result,i,s,this.span):new P(this.source,1,!1)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new P(this.source,0,!1):this.map(e.changes)}map(e){return new B(this.source,this.mapExplicit(e),this.result,e.mapPos(this.from),e.mapPos(this.to,1),this.span)}}const H=i.StateEffect.define(),O=i.StateEffect.define(),N=i.StateEffect.define({map:(e,t)=>e.map((e=>e.hasResult()&&!t.empty?e.map(t):e))}),R=i.StateEffect.define(),j=i.StateField.define({create:()=>T.start(),update:(e,t)=>e.update(t),provide:e=>[o.showTooltip.from(e,(e=>e.tooltip)),r.EditorView.contentAttributes.from(e,(e=>e.attrs))]});function D(e,t="option"){return n=>{let i=n.state.field(j,!1);if(!i||!i.open||Date.now()-i.open.timestamp<75)return!1;let s,r=1;"page"==t&&(s=n.dom.querySelector(".cm-tooltip-autocomplete"))&&(r=Math.max(2,Math.floor(s.offsetHeight/s.firstChild.offsetHeight)));let o=i.open.selected+r*(e?1:-1),{length:a}=i.open.options;return o<0?o="page"==t?0:a-1:o>=a&&(o="page"==t?a-1:0),n.dispatch({effects:R.of(o)}),!0}}const F=e=>{let t=e.state.field(j,!1);return!(!t||!t.open||Date.now()-t.open.timestamp<75)&&(m(e,t.open.options[t.open.selected]),!0)},$=e=>!!e.state.field(j,!1)&&(e.dispatch({effects:H.of(!0)}),!0),z=e=>{let t=e.state.field(j,!1);return!(!t||!t.active.some((e=>0!=e.state)))&&(e.dispatch({effects:O.of(null)}),!0)};class q{constructor(e,t){this.source=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const X=r.ViewPlugin.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let t of e.state.field(j).active)1==t.state&&this.startQuery(t)}update(e){let t=e.state.field(j);if(!e.selectionSet&&!e.docChanged&&e.startState.field(j)==t)return;let n=e.transactions.some((e=>{let t=e.annotation(i.Transaction.userEvent);return(e.selection||e.docChanged)&&"input"!=t&&"delete"!=t}));for(let i=0;i<this.running.length;i++){let t=this.running[i];if(n||t.updates.length+e.transactions.length>50&&t.time-Date.now()>1e3){for(let e of t.context.abortListeners)try{e()}catch(s){Object(r.logException)(this.view.state,s)}t.context.abortListeners=null,this.running.splice(i--,1)}else t.updates.push(...e.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=t.active.some((e=>1==e.state&&!this.running.some((t=>t.source==e.source))))?setTimeout((()=>this.startUpdate()),50):-1,0!=this.composing)for(let r of e.transactions)"input"==r.annotation(i.Transaction.userEvent)?this.composing=2:2==this.composing&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:e}=this.view,t=e.field(j);for(let n of t.active)1!=n.state||this.running.some((e=>e.source==n.source))||this.startQuery(n)}startQuery(e){let{state:t}=this.view,n=f(t),i=new l(t,n,e.explicitAt(n)),s=new q(e.source,i);this.running.push(s),Promise.resolve(e.source(i)).then((e=>{s.context.aborted||(s.done=e||null,this.scheduleAccept())}),(e=>{this.view.dispatch({effects:O.of(null)}),Object(r.logException)(this.view.state,e)}))}scheduleAccept(){this.running.every((e=>void 0!==e.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),50))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],n=this.view.state.facet(b);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(void 0===s.done)continue;if(this.running.splice(i--,1),s.done){let i=new B(s.source,s.context.explicit?s.context.pos:-1,s.done,s.done.from,null!==(e=s.done.to)&&void 0!==e?e:f(s.updates.length?s.updates[0].startState:this.view.state),s.done.span?u(s.done.span,!0):null);for(let e of s.updates)i=i.update(e,n);if(i.hasResult()){t.push(i);continue}}let r=this.view.state.field(j).active.find((e=>e.source==s.source));if(r&&1==r.state)if(null==s.done){let e=new P(s.source,0,!1);for(let t of s.updates)e=e.update(t,n);1!=e.state&&t.push(e)}else this.startQuery(r)}t.length&&this.view.dispatch({effects:N.of(t)})}},{eventHandlers:{compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:H.of(!1)})),20),this.composing=0}}});class U{constructor(e,t,n,i){this.field=e,this.line=t,this.from=n,this.to=i}}class V{constructor(e,t,n){this.field=e,this.from=t,this.to=n}map(e){return new V(this.field,e.mapPos(this.from,-1),e.mapPos(this.to,1))}}class _{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let n=[],i=[t],s=e.doc.lineAt(t),r=/^\s*/.exec(s.text)[0];for(let o of this.lines){if(n.length){let n=r,s=/^\t*/.exec(o)[0].length;for(let t=0;t<s;t++)n+=e.facet(a.indentUnit);i.push(t+n.length-s),o=n+o.slice(s)}n.push(o),t+=o.length+1}return{text:n,ranges:this.fieldPositions.map((e=>new V(e.field,i[e.line]+e.from,i[e.line]+e.to)))}}static parse(e){let t,n=[],i=[],s=[];for(let r of e.split(/\r\n?|\n/)){for(;t=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(r);){let e=t[1]?+t[1]:null,o=t[2]||t[3],a=-1;for(let t=0;t<n.length;t++)(null!=e?n[t].seq==e:o&&n[t].name==o)&&(a=t);if(a<0){let t=0;for(;t<n.length&&(null==e||null!=n[t].seq&&n[t].seq<e);)t++;n.splice(t,0,{seq:e,name:o||null}),a=t;for(let e of s)e.field>=a&&e.field++}s.push(new U(a,i.length,t.index,t.index+o.length)),r=r.slice(0,t.index)+o+r.slice(t.index+t[0].length)}i.push(r)}return new _(i,s)}}let W=r.Decoration.widget({widget:new class extends r.WidgetType{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),Q=r.Decoration.mark({class:"cm-snippetField"});class K{constructor(e,t){this.ranges=e,this.active=t,this.deco=r.Decoration.set(e.map((e=>(e.from==e.to?W:Q).range(e.from,e.to))))}map(e){return new K(this.ranges.map((t=>t.map(e))),this.active)}selectionInsideField(e){return e.ranges.every((e=>this.ranges.some((t=>t.field==this.active&&t.from<=e.from&&t.to>=e.to))))}}const Z=i.StateEffect.define({map:(e,t)=>e&&e.map(t)}),Y=i.StateEffect.define(),J=i.StateField.define({create:()=>null,update(e,t){for(let n of t.effects){if(n.is(Z))return n.value;if(n.is(Y)&&e)return new K(e.ranges,n.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>r.EditorView.decorations.from(e,(e=>e?e.deco:r.Decoration.none))});function G(e,t){return i.EditorSelection.create(e.filter((e=>e.field==t)).map((e=>i.EditorSelection.range(e.from,e.to))))}function ee(e){let t=_.parse(e);return(e,n,r,o)=>{let{text:a,ranges:l}=t.instantiate(e.state,r),c={changes:{from:r,to:o,insert:s.a.of(a)}};if(l.length&&(c.selection=G(l,0)),l.length>1){let t=new K(l,0),n=c.effects=[Z.of(t)];void 0===e.state.field(J,!1)&&n.push(i.StateEffect.appendConfig.of([J.init((()=>t)),ae,ce,v]))}e.dispatch(e.state.update(c))}}function te(e){return({state:t,dispatch:n})=>{let i=t.field(J,!1);if(!i||e<0&&0==i.active)return!1;let s=i.active+e,r=e>0&&!i.ranges.some((t=>t.field==s+e));return n(t.update({selection:G(i.ranges,s),effects:Z.of(r?null:new K(i.ranges,s))})),!0}}const ne=({state:e,dispatch:t})=>!!e.field(J,!1)&&(t(e.update({effects:Z.of(null)})),!0),ie=te(1),se=te(-1),re=[{key:"Tab",run:ie,shift:se},{key:"Escape",run:ne}],oe=i.Facet.define({combine:e=>e.length?e[0]:re}),ae=i.Prec.override(r.keymap.compute([oe],(e=>e.facet(oe))));function le(e,t){return Object.assign(Object.assign({},t),{apply:ee(e)})}const ce=r.EditorView.domEventHandlers({mousedown(e,t){let n,i=t.state.field(J,!1);if(!i||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;let s=i.ranges.find((e=>e.from<=n&&e.to>=n));return!(!s||s.field==i.active)&&(t.dispatch({selection:G(i.ranges,s.field),effects:Z.of(i.ranges.some((e=>e.field>s.field))?new K(i.ranges,s.field):null)}),!0)}}),he=e=>{let t=[],n=Object.create(null),s=e.state.charCategorizer(e.pos),r=Math.max(0,e.pos-5e4),o=Math.min(e.state.doc.length,r+1e5),a=e.pos;for(let l=e.state.doc.iterRange(r,o),c=r;!l.next().done;){let{value:r}=l,o=-1;for(let l=0;;l++){if(l<r.length&&s(r[l])==i.CharCategory.Word)o<0&&(o=l);else if(o>-1){if(c+o<=e.pos&&c+l>=e.pos)a=c+o;else{let e=r.slice(o,l);n[e]||(t.push({type:"text",label:e}),n[e]=!0)}o=-1}if(l==r.length)break}c+=r.length}return{from:a,options:t,span:/^\w*/}};function pe(e={}){return[j,b.of(e),X,fe,v]}const de=[{key:"Ctrl-Space",run:$},{key:"Escape",run:z},{key:"ArrowDown",run:D(!0)},{key:"ArrowUp",run:D(!1)},{key:"PageDown",run:D(!0,"page")},{key:"PageUp",run:D(!1,"page")},{key:"Enter",run:F}],fe=i.Prec.override(r.keymap.computeN([b],(e=>e.facet(b).defaultKeymap?[de]:[])));function ue(e){let t=e.field(j,!1);return t&&t.active.some((e=>1==e.state))?"pending":t&&t.active.some((e=>0!=e.state))?"active":null}function me(e){var t;let n=null===(t=e.field(j,!1))||void 0===t?void 0:t.open;return n?n.options.map((e=>e.completion)):[]}},"87dK":function(e,t,n){"use strict";n.r(t),n.d(t,"conf",(function(){return s})),n.d(t,"language",(function(){return r}));var i="undefined"===typeof monaco?self.monaco:monaco,s={wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\#\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g,comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],onEnterRules:[{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,afterText:/^\s*\*\/$/,action:{indentAction:i.languages.IndentAction.IndentOutdent,appendText:" * "}},{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,action:{indentAction:i.languages.IndentAction.None,appendText:" * "}},{beforeText:/^(\t|(\ \ ))*\ \*(\ ([^\*]|\*(?!\/))*)?$/,action:{indentAction:i.languages.IndentAction.None,appendText:"* "}},{beforeText:/^(\t|(\ \ ))*\ \*\/\s*$/,action:{indentAction:i.languages.IndentAction.None,removeText:1}}],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string"]},{open:"'",close:"'",notIn:["string","comment"]},{open:"`",close:"`",notIn:["string","comment"]},{open:"/**",close:" */",notIn:["string"]}],folding:{markers:{start:new RegExp("^\\s*//\\s*#?region\\b"),end:new RegExp("^\\s*//\\s*#?endregion\\b")}}},r={defaultToken:"invalid",tokenPostfix:".ts",keywords:["abstract","as","break","case","catch","class","continue","const","constructor","debugger","declare","default","delete","do","else","enum","export","extends","false","finally","for","from","function","get","if","implements","import","in","infer","instanceof","interface","is","keyof","let","module","namespace","new","null","package","private","protected","public","readonly","require","global","return","set","static","super","switch","symbol","this","throw","true","try","type","typeof","unique","var","void","while","with","yield","async","await","of"],typeKeywords:["any","boolean","number","object","string","undefined","bigint","never","unknown"],operators:["<=",">=","==","!=","===","!==","=>","+","-","**","*","/","%","++","--","<<","</",">>",">>>","&","|","^","!","~","&&","||","??","?",":","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=","@","#"],symbols:/[=><!~?:&|+\-*\/\^%#]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+(_+\d+)*/,octaldigits:/[0-7]+(_+[0-7]+)*/,binarydigits:/[0-1]+(_+[0-1]+)*/,hexdigits:/[[0-9a-fA-F]+(_+[0-9a-fA-F]+)*/,regexpctl:/[(){}\[\]\$\^|\-*+?\.]/,regexpesc:/\\(?:[bBdDfnrstvwWn0\\\/]|@regexpctl|c[A-Z]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4})/,tokenizer:{root:[[/[{}]/,"delimiter.bracket"],{include:"common"}],common:[[/[a-z_$][\w$]*/,{cases:{"@typeKeywords":"keyword","@keywords":"keyword","@default":"identifier"}}],[/[A-Z][\w\$]*/,"type.identifier"],{include:"@whitespace"},[/\/(?=([^\\\/]|\\.)+\/([gimsuy]*)(\s*)(\.|;|,|\)|\]|\}|$))/,{token:"regexp",bracket:"@open",next:"@regexp"}],[/[()\[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/!(?=([^=]|$))/,"delimiter"],[/@symbols/,{cases:{"@operators":"delimiter","@default":""}}],[/(@digits)[eE]([\-+]?(@digits))?/,"number.float"],[/(@digits)\.(@digits)([eE][\-+]?(@digits))?/,"number.float"],[/0[xX](@hexdigits)n?/,"number.hex"],[/0[oO]?(@octaldigits)n?/,"number.octal"],[/0[bB](@binarydigits)n?/,"number.binary"],[/(@digits)n?/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string_double"],[/'/,"string","@string_single"],[/`/,"string","@string_backtick"]],whitespace:[[/[ \t\r\n]+/,""],[/\/\*\*(?!\/)/,"comment.doc","@jsdoc"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],comment:[[/[^\/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[\/*]/,"comment"]],jsdoc:[[/[^\/*]+/,"comment.doc"],[/\*\//,"comment.doc","@pop"],[/[\/*]/,"comment.doc"]],regexp:[[/(\{)(\d+(?:,\d*)?)(\})/,["regexp.escape.control","regexp.escape.control","regexp.escape.control"]],[/(\[)(\^?)(?=(?:[^\]\\\/]|\\.)+)/,["regexp.escape.control",{token:"regexp.escape.control",next:"@regexrange"}]],[/(\()(\?:|\?=|\?!)/,["regexp.escape.control","regexp.escape.control"]],[/[()]/,"regexp.escape.control"],[/@regexpctl/,"regexp.escape.control"],[/[^\\\/]/,"regexp"],[/@regexpesc/,"regexp.escape"],[/\\\./,"regexp.invalid"],[/(\/)([gimsuy]*)/,[{token:"regexp",bracket:"@close",next:"@pop"},"keyword.other"]]],regexrange:[[/-/,"regexp.escape.control"],[/\^/,"regexp.invalid"],[/@regexpesc/,"regexp.escape"],[/[^\]]/,"regexp"],[/\]/,{token:"regexp.escape.control",next:"@pop",bracket:"@close"}]],string_double:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],string_single:[[/[^\\']+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/'/,"string","@pop"]],string_backtick:[[/\$\{/,{token:"delimiter.bracket",next:"@bracketCounting"}],[/[^\\`$]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/`/,"string","@pop"]],bracketCounting:[[/\{/,"delimiter.bracket","@bracketCounting"],[/\}/,"delimiter.bracket","@pop"],{include:"common"}]}}},S0tx:function(e,t,n){"use strict";n.r(t),n.d(t,"commonmarkLanguage",(function(){return Me})),n.d(t,"deleteMarkupBackward",(function(){return Re})),n.d(t,"insertNewlineContinueMarkup",(function(){return Ne})),n.d(t,"markdown",(function(){return De})),n.d(t,"markdownKeymap",(function(){return je})),n.d(t,"markdownLanguage",(function(){return Pe}));var i,s=n("4eob"),r=n("uZp5"),o=n("AtEE"),a=n("yqQ+"),l=n("ubVE"),c=n("WQMp");class h{constructor(e,t,n,i,s,r,o){this.type=e,this.value=t,this.from=n,this.hash=i,this.end=s,this.children=r,this.positions=o}static create(e,t,n,i,s){return new h(e,t,n,i+(i<<8)+e+(t<<4)|0,s,[],[])}toTree(e,t=this.end){let n=this.children.length-1;n>=0&&(t=Math.max(t,this.positions[n]+this.children[n].length+this.from));let i=new c.e(e.types[this.type],this.children,this.positions,t-this.from).balance(2048);return de(i.children,this.hash),i}copy(){return new h(this.type,this.value,this.from,this.hash,this.end,this.children.slice(),this.positions.slice())}}!function(e){e[e.Document=1]="Document",e[e.CodeBlock=2]="CodeBlock",e[e.FencedCode=3]="FencedCode",e[e.Blockquote=4]="Blockquote",e[e.HorizontalRule=5]="HorizontalRule",e[e.BulletList=6]="BulletList",e[e.OrderedList=7]="OrderedList",e[e.ListItem=8]="ListItem",e[e.ATXHeading1=9]="ATXHeading1",e[e.ATXHeading2=10]="ATXHeading2",e[e.ATXHeading3=11]="ATXHeading3",e[e.ATXHeading4=12]="ATXHeading4",e[e.ATXHeading5=13]="ATXHeading5",e[e.ATXHeading6=14]="ATXHeading6",e[e.SetextHeading1=15]="SetextHeading1",e[e.SetextHeading2=16]="SetextHeading2",e[e.HTMLBlock=17]="HTMLBlock",e[e.LinkReference=18]="LinkReference",e[e.Paragraph=19]="Paragraph",e[e.CommentBlock=20]="CommentBlock",e[e.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",e[e.Escape=22]="Escape",e[e.Entity=23]="Entity",e[e.HardBreak=24]="HardBreak",e[e.Emphasis=25]="Emphasis",e[e.StrongEmphasis=26]="StrongEmphasis",e[e.Link=27]="Link",e[e.Image=28]="Image",e[e.InlineCode=29]="InlineCode",e[e.HTMLTag=30]="HTMLTag",e[e.Comment=31]="Comment",e[e.ProcessingInstruction=32]="ProcessingInstruction",e[e.URL=33]="URL",e[e.HeaderMark=34]="HeaderMark",e[e.QuoteMark=35]="QuoteMark",e[e.ListMark=36]="ListMark",e[e.LinkMark=37]="LinkMark",e[e.EmphasisMark=38]="EmphasisMark",e[e.CodeMark=39]="CodeMark",e[e.CodeInfo=40]="CodeInfo",e[e.LinkTitle=41]="LinkTitle",e[e.LinkLabel=42]="LinkLabel"}(i||(i={}));class p{constructor(e,t){this.start=e,this.content=t,this.marks=[],this.parsers=[]}}class d{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let e=this.skipSpace(this.basePos);this.indent=this.countIndent(e,this.pos,this.indent),this.pos=e,this.next=e==this.text.length?-1:this.text.charCodeAt(e)}skipSpace(e){return g(this.text,e)}reset(e){for(this.text=e,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(e){this.basePos=e,this.baseIndent=this.countIndent(e,this.pos,this.indent)}moveBaseColumn(e){this.baseIndent=e,this.basePos=this.findColumn(e)}addMarker(e){this.markers.push(e)}countIndent(e,t=0,n=0){for(let i=t;i<e;i++)n+=9==this.text.charCodeAt(i)?4-n%4:1;return n}findColumn(e){let t=0;for(let n=0;t<this.text.length&&n<e;t++)n+=9==this.text.charCodeAt(t)?4-n%4:1;return t}scrub(){if(!this.baseIndent)return this.text;let e="";for(let t=0;t<this.baseIndent;t++)e+=" ";return e+this.text.slice(this.basePos)}}function f(e,t,n){if(n.pos==n.text.length||e!=t.block&&n.indent>=t.stack[n.depth+1].value+n.baseIndent)return!0;if(n.indent>=n.baseIndent+4)return!1;let s=(e.type==i.OrderedList?S:y)(n,t,!1);return s>0&&(e.type!=i.BulletList||v(n,t,!1)<0)&&n.text.charCodeAt(n.pos+s-1)==e.value}const u={[i.Blockquote]:(e,t,n)=>62==n.next&&(n.markers.push(Z(i.QuoteMark,t.lineStart+n.pos,t.lineStart+n.pos+1)),n.moveBase(n.pos+1),e.end=t.lineStart+n.text.length,!0),[i.ListItem]:(e,t,n)=>!(n.indent<n.baseIndent+e.value&&n.next>-1)&&(n.moveBaseColumn(n.baseIndent+e.value),!0),[i.OrderedList]:f,[i.BulletList]:f,[i.Document]:()=>!0};function m(e){return 32==e||9==e||10==e||13==e}function g(e,t=0){for(;t<e.length&&m(e.charCodeAt(t));)t++;return t}function k(e,t,n){for(;t>n&&m(e.charCodeAt(t-1));)t--;return t}function x(e){if(96!=e.next&&126!=e.next)return-1;let t=e.pos+1;for(;t<e.text.length&&e.text.charCodeAt(t)==e.next;)t++;if(t<e.pos+3)return-1;if(96==e.next)for(let n=t;n<e.text.length;n++)if(96==e.text.charCodeAt(n))return-1;return t}function b(e){return 62!=e.next?-1:32==e.text.charCodeAt(e.pos+1)?2:1}function v(e,t,n){if(42!=e.next&&45!=e.next&&95!=e.next)return-1;let i=1;for(let s=e.pos+1;s<e.text.length;s++){let t=e.text.charCodeAt(s);if(t==e.next)i++;else if(!m(t))return-1}return n&&45==e.next&&L(e)>-1&&e.depth==t.stack.length||i<3?-1:1}function w(e,t){return e.block.type==t||e.stack.length>1&&e.stack[e.stack.length-2].type==t}function y(e,t,n){return 45!=e.next&&43!=e.next&&42!=e.next||e.pos!=e.text.length-1&&!m(e.text.charCodeAt(e.pos+1))||!(!n||w(t,i.BulletList)||e.skipSpace(e.pos+2)<e.text.length)?-1:1}function S(e,t,n){let s=e.pos,r=e.next;for(;r>=48&&r<=57;){if(s++,s==e.text.length)return-1;r=e.text.charCodeAt(s)}return s==e.pos||s>e.pos+9||46!=r&&41!=r||s<e.text.length-1&&!m(e.text.charCodeAt(s+1))||n&&!w(t,i.OrderedList)&&(e.skipSpace(s+1)==e.text.length||s>e.pos+1||49!=e.next)?-1:s+1-e.pos}function C(e){if(35!=e.next)return-1;let t=e.pos+1;for(;t<e.text.length&&35==e.text.charCodeAt(t);)t++;if(t<e.text.length&&32!=e.text.charCodeAt(t))return-1;let n=t-e.pos;return n>6?-1:n}function L(e){if(45!=e.next&&61!=e.next||e.indent>=e.baseIndent+4)return-1;let t=e.pos+1;for(;t<e.text.length&&e.text.charCodeAt(t)==e.next;)t++;let n=t;for(;t<e.text.length&&m(e.text.charCodeAt(t));)t++;return t==e.text.length?n:-1}const T=/^[ \t]*$/,E=/-->/,A=/\?>/,I=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,E],[/^\s*<\?/,A],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,T],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,T]];function M(e,t,n){if(60!=e.next)return-1;let i=e.text.slice(e.pos);for(let s=0,r=I.length-(n?1:0);s<r;s++)if(I[s][0].test(i))return s;return-1}function P(e,t){let n=e.countIndent(t,e.pos,e.indent),i=e.countIndent(e.skipSpace(t),t,n);return i>=n+5?n+1:i}const B={LinkReference:void 0,IndentedCode(e,t){let n=t.baseIndent+4;if(t.indent<n)return!1;let s=t.findColumn(n),r=e.lineStart+s,o=e.lineStart+t.text.length,a=[],l=[];for(;e.nextLine()&&!(t.depth<e.stack.length);)if(t.pos==t.text.length)for(let e of t.markers)l.push(e);else{if(t.indent<n)break;if(l.length){for(let e of l)a.push(e);l=[]}for(let e of t.markers)a.push(e);o=e.lineStart+t.text.length}l.length&&(t.markers=l.concat(t.markers));let h=!a.length&&e.parser.codeParser&&e.parser.codeParser("");return h?e.startNested(r,h.startParse(e.input.clip(o),r,e.parseContext),(t=>new c.e(e.parser.nodeSet.types[i.CodeBlock],[t],[0],o-r))):e.addNode(e.buffer.writeElements(a,-r).finish(i.CodeBlock,o-r),r),!0},FencedCode(e,t){let n=x(t);if(n<0)return!1;let s=e.lineStart+t.pos,r=t.next,o=n-t.pos,a=t.skipSpace(n),l=k(t.text,t.text.length,a),c=[Z(i.CodeMark,s,s+o)],h="";a<l&&(c.push(Z(i.CodeInfo,e.lineStart+a,e.lineStart+l)),h=t.text.slice(a,l));let p=c.length,d=p,f=e.lineStart+t.text.length+1,u=-1;for(;e.nextLine()&&!(t.depth<e.stack.length);){for(let e of t.markers)c.push(e);let n=t.pos;if(t.indent-t.baseIndent<4)for(;n<t.text.length&&t.text.charCodeAt(n)==r;)n++;if(n-t.pos>=o&&t.skipSpace(n)==t.text.length){c.push(Z(i.CodeMark,e.lineStart+t.pos,e.lineStart+n)),p++,u=e.lineStart-1,e.nextLine();break}}let m=e.prevLineEnd();u<0&&(u=m);let g=c.length==p&&e.parser.codeParser&&e.parser.codeParser(h);return g?e.startNested(s,g.startParse(e.input.clip(u),f,e.parseContext),(t=>(c.splice(d,0,new K(t,f)),Z(i.FencedCode,s,m,c).toTree(e.parser.nodeSet)))):e.addNode(e.buffer.writeElements(c,-s).finish(i.FencedCode,e.prevLineEnd()-s),s),!0},Blockquote(e,t){let n=b(t);return!(n<0)&&(e.startContext(i.Blockquote,t.pos),e.addNode(i.QuoteMark,e.lineStart+t.pos,e.lineStart+t.pos+1),t.moveBase(t.pos+n),null)},HorizontalRule(e,t){if(v(t,e,!1)<0)return!1;let n=e.lineStart+t.pos;return e.nextLine(),e.addNode(i.HorizontalRule,n),!0},BulletList(e,t){let n=y(t,e,!1);if(n<0)return!1;e.block.type!=i.BulletList&&e.startContext(i.BulletList,t.basePos,t.next);let s=P(t,t.pos+1);return e.startContext(i.ListItem,t.basePos,s-t.baseIndent),e.addNode(i.ListMark,e.lineStart+t.pos,e.lineStart+t.pos+n),t.moveBaseColumn(s),null},OrderedList(e,t){let n=S(t,e,!1);if(n<0)return!1;e.block.type!=i.OrderedList&&e.startContext(i.OrderedList,t.basePos,t.text.charCodeAt(t.pos+n-1));let s=P(t,t.pos+n);return e.startContext(i.ListItem,t.basePos,s-t.baseIndent),e.addNode(i.ListMark,e.lineStart+t.pos,e.lineStart+t.pos+n),t.moveBaseColumn(s),null},ATXHeading(e,t){let n=C(t);if(n<0)return!1;let s=t.pos,r=e.lineStart+s,o=k(t.text,t.text.length,s),a=o;for(;a>s&&t.text.charCodeAt(a-1)==t.next;)a--;a!=o&&a!=s&&m(t.text.charCodeAt(a-1))||(a=t.text.length);let l=e.buffer.write(i.HeaderMark,0,n).writeElements(e.parser.parseInline(t.text.slice(s+n+1,a),r+n+1),-r);a<t.text.length&&l.write(i.HeaderMark,a-s,o-s);let c=l.finish(i.ATXHeading1-1+n,t.text.length-s);return e.nextLine(),e.addNode(c,r),!0},HTMLBlock(e,t){let n=M(t,0,!1);if(n<0)return!1;let s=e.lineStart+t.pos,r=I[n][1],o=[],a=r!=T;for(;!r.test(t.text)&&e.nextLine();){if(t.depth<e.stack.length){a=!1;break}for(let e of t.markers)o.push(e)}a&&e.nextLine();let l=r==E?i.CommentBlock:r==A?i.ProcessingInstructionBlock:i.HTMLBlock,h=e.prevLineEnd();return!o.length&&l==i.HTMLBlock&&e.parser.htmlParser?e.startNested(s,e.parser.htmlParser.startParse(e.input.clip(h),s,e.parseContext),(t=>new c.e(e.parser.nodeSet.types[l],[t],[0],h-s))):e.addNode(e.buffer.writeElements(o,-s).finish(l,h-s),s),!0},SetextHeading:void 0};class H{constructor(e){this.stage=0,this.elts=[],this.pos=0,this.start=e.start,this.advance(e.content)}nextLine(e,t,n){if(-1==this.stage)return!1;let i=n.content+"\n"+t.scrub(),s=this.advance(i);return s>-1&&s<i.length&&this.complete(e,n,s)}finish(e,t){return(2==this.stage||3==this.stage)&&g(t.content,this.pos)==t.content.length&&this.complete(e,t,t.content.length)}complete(e,t,n){return e.addLeafElement(t,Z(i.LinkReference,this.start,this.start+n,this.elts)),!0}nextStage(e){return e?(this.pos=e.to-this.start,this.elts.push(e),this.stage++,!0):(!1===e&&(this.stage=-1),!1)}advance(e){for(;;){if(-1==this.stage)return-1;if(0==this.stage){if(!this.nextStage(le(e,this.pos,this.start,!0)))return-1;if(58!=e.charCodeAt(this.pos))return this.stage=-1;this.elts.push(Z(i.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else{if(1!=this.stage){if(2==this.stage){let t=g(e,this.pos),n=0;if(t>this.pos){let i=ae(e,t,this.start);if(i){let t=O(e,i.to-this.start);t>0&&(this.nextStage(i),n=t)}}return n||(n=O(e,this.pos)),n>0&&n<e.length?n:-1}return O(e,this.pos)}if(!this.nextStage(oe(e,g(e,this.pos),this.start)))return-1}}}}function O(e,t){for(;t<e.length;t++){let n=e.charCodeAt(t);if(10==n)break;if(!m(n))return-1}return t}class N{nextLine(e,t,n){let s=t.depth<e.stack.length?-1:L(t),r=t.next;if(s<0)return!1;let o=Z(i.HeaderMark,e.lineStart+t.pos,e.lineStart+s);return e.nextLine(),e.addLeafElement(n,Z(61==r?i.SetextHeading1:i.SetextHeading2,n.start,e.prevLineEnd(),[...e.parser.parseInline(n.content,n.start),o])),!0}finish(){return!1}}const R={LinkReference:(e,t)=>91==t.content.charCodeAt(0)?new H(t):null,SetextHeading:()=>new N},j=[(e,t)=>C(t)>=0,(e,t)=>x(t)>=0,(e,t)=>b(t)>=0,(e,t)=>y(t,e,!0)>=0,(e,t)=>S(t,e,!0)>=0,(e,t)=>v(t,e,!0)>=0,(e,t)=>M(t,0,!0)>=0];class D{constructor(e,t,n){this.from=e,this.parse=t,this.finish=n}}class F{constructor(e,t,n,s){this.parser=e,this.input=t,this.parseContext=s,this.line=new d,this.atEnd=!1,this.nested=null,this.lineStart=n,this.block=h.create(i.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=(null===s||void 0===s?void 0:s.fragments)?new ue(s.fragments,t):null,this.updateLine(t.lineAfter(this.lineStart))}get pos(){return this.nested?this.nested.parse.pos:this.lineStart}advance(){if(this.nested){let e=this.nested.parse.advance();if(e){let t=this.nested.finish(e);t instanceof Q&&(t=t.toTree(this.parser.nodeSet)),this.addNode(t,this.nested.from),this.nested=null}return null}let{line:e}=this;for(;;){for(;e.depth<this.stack.length;)this.finishContext();for(let t of e.markers)this.addNode(t.type,t.from,t.to);if(e.pos<e.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(e.basePos))return null;e:for(;;){for(let t of this.parser.blockParsers)if(t){let n=t(this,e);if(0!=n){if(1==n)return null;e.forward();continue e}}break}let t=new p(this.lineStart+e.pos,e.text.slice(e.pos));for(let n of this.parser.leafBlockParsers)if(n){let e=n(this,t);e&&t.parsers.push(e)}e:for(;this.nextLine()&&e.pos!=e.text.length;){if(e.indent<e.baseIndent+4)for(let t of me.endLeafBlock)if(t(this,e))break e;for(let n of t.parsers)if(n.nextLine(this,e,t))return null;t.content+="\n"+e.scrub();for(let n of e.markers)t.marks.push(n)}return this.finishLeaf(t),null}reuseFragment(e){if(!this.fragments.moveTo(this.lineStart+e,this.lineStart)||!this.fragments.matches(this.block.hash))return!1;let t=this.fragments.takeNodes(this);return!!t&&(this.lineStart+=t,this.lineStart<this.input.length?(this.lineStart++,this.updateLine(this.input.lineAfter(this.lineStart))):(this.atEnd=!0,this.updateLine("")),!0)}nextLine(){return this.lineStart+=this.line.text.length,this.lineStart>=this.input.length?(this.atEnd=!0,this.updateLine(""),!1):(this.lineStart++,this.updateLine(this.input.lineAfter(this.lineStart)),!0)}updateLine(e){let{line:t}=this;for(t.reset(e);t.depth<this.stack.length;t.depth++){let e=this.stack[t.depth],n=this.parser.skipContextMarkup[e.type];if(!n)throw new Error("Unhandled block context "+i[e.type]);if(!n(e,this,t))break;t.forward()}}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(e,t,n=0){this.block=h.create(e,n,this.lineStart+t,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(e,t,n=0){this.startContext(this.parser.getNodeType(e),t,n)}addNode(e,t,n){"number"==typeof e&&(e=new c.e(this.parser.nodeSet.types[e],_,_,(null!==n&&void 0!==n?n:this.prevLineEnd())-t)),this.block.children.push(e),this.block.positions.push(t-this.block.from)}addElement(e){this.block.children.push(e.toTree(this.parser.nodeSet)),this.block.positions.push(e.from-this.block.from)}addLeafElement(e,t){this.addNode(this.buffer.writeElements(he(t.children,e.marks),-t.from).finish(t.type,t.to-t.from),t.from)}startNested(e,t,n){this.nested=new D(e,t,n)}finishContext(){this.block=V(this.stack,this.parser.nodeSet)}finish(){for(;this.stack.length>1;)this.finishContext();return this.block.toTree(this.parser.nodeSet,this.lineStart)}forceFinish(){let e=this.stack.map((e=>e.copy()));if(this.nested){let t=e[e.length-1];t.children.push(this.nested.parse.forceFinish()),t.positions.push(this.nested.from-t.from)}for(;e.length>1;)V(e,this.parser.nodeSet);return e[0].toTree(this.parser.nodeSet,this.lineStart)}finishLeaf(e){for(let n of e.parsers)if(n.finish(this,e))return;let t=he(this.parser.parseInline(e.content,e.start),e.marks);this.addNode(this.buffer.writeElements(t,-e.start).finish(i.Paragraph,e.content.length),e.start)}elt(e,t,n,i){return"string"==typeof e?Z(this.parser.getNodeType(e),t,n,i):new K(e,t)}get buffer(){return new W(this.parser.nodeSet)}}class ${constructor(e,t,n,i,s,r,o,a,l,c){this.nodeSet=e,this.codeParser=t,this.htmlParser=n,this.blockParsers=i,this.leafBlockParsers=s,this.blockNames=r,this.endLeafBlock=o,this.skipContextMarkup=a,this.inlineParsers=l,this.inlineNames=c,this.nodeTypes=Object.create(null);for(let h of e.types)this.nodeTypes[h.name]=h.id}startParse(e,t=0,n={}){return new F(this,e,t,n)}configure(e){let t=q(e);if(!t)return this;let{nodeSet:n,skipContextMarkup:s}=this,r=this.blockParsers.slice(),o=this.leafBlockParsers.slice(),a=this.blockNames.slice(),l=this.inlineParsers.slice(),h=this.inlineNames.slice(),p=this.endLeafBlock.slice();if(z(t.defineNodes)){s=Object.assign({},s);let e=n.types.slice();for(let n of t.defineNodes){let{name:t,block:r,composite:o}="string"==typeof n?{name:n}:n;if(e.some((e=>e.name==t)))continue;o&&(s[e.length]=(e,t,n)=>o(t,n,e.value));let a=e.length,l=o?["Block","BlockContext"]:r?a>=i.ATXHeading1&&a<=i.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;e.push(c.d.define({id:a,name:t,props:l&&[[c.b.group,l]]}))}n=new c.c(e)}if(z(t.props)&&(n=n.extend(...t.props)),z(t.remove))for(let i of t.remove){let e=this.blockNames.indexOf(i),t=this.inlineNames.indexOf(i);e>-1&&(r[e]=o[e]=void 0),t>-1&&(l[t]=void 0)}if(z(t.parseBlock))for(let i of t.parseBlock){let e=a.indexOf(i.name);if(e>-1)r[e]=i.parse,o[e]=i.leaf;else{let e=i.before?X(a,i.before):i.after?X(a,i.after)+1:a.length-1;r.splice(e,0,i.parse),o.splice(e,0,i.leaf),a.splice(e,0,i.name)}i.endLeaf&&p.push(i.endLeaf)}if(z(t.parseInline))for(let i of t.parseInline){let e=h.indexOf(i.name);if(e>-1)l[e]=i.parse;else{let e=i.before?X(h,i.before):i.after?X(h,i.after)+1:h.length-1;l.splice(e,0,i.parse),h.splice(e,0,i.name)}}return new $(n,t.codeParser||this.codeParser,t.htmlParser||this.htmlParser,r,o,a,p,s,l,h)}getNodeType(e){let t=this.nodeTypes[e];if(null==t)throw new RangeError(`Unknown node type '${e}'`);return t}parseInline(e,t){let n=new ce(this,e,t);e:for(let i=t;i<n.end;){let e=n.char(i);for(let t of this.inlineParsers)if(t){let s=t(n,e,i);if(s>=0){i=s;continue e}}i++}return n.resolveMarkers(0)}}function z(e){return null!=e&&e.length>0}function q(e){if(!Array.isArray(e))return e;if(0==e.length)return null;let t=q(e[0]);if(1==e.length)return t;let n=q(e.slice(1));if(!n||!t)return t||n;let i=(e,t)=>(e||_).concat(t||_);return{props:i(t.props,n.props),codeParser:n.codeParser||t.codeParser,htmlParser:n.htmlParser||t.htmlParser,defineNodes:i(t.defineNodes,n.defineNodes),parseBlock:i(t.parseBlock,n.parseBlock),parseInline:i(t.parseInline,n.parseInline),remove:i(t.remove,n.remove)}}function X(e,t){let n=e.indexOf(t);if(n<0)throw new RangeError(`Position specified relative to unknown parser ${t}`);return n}let U=[c.d.none];for(let $e,ze=1;$e=i[ze];ze++)U[ze]=c.d.define({id:ze,name:$e,props:ze>=i.Escape?[]:[[c.b.group,ze in u?["Block","BlockContext"]:["Block","LeafBlock"]]]});function V(e,t){let n=e.pop(),i=e[e.length-1];return i.children.push(n.toTree(t)),i.positions.push(n.from-i.from),i}const _=[];class W{constructor(e){this.nodeSet=e,this.content=[],this.nodes=[]}write(e,t,n,i=0){return this.content.push(e,t,n,4+4*i),this}writeElements(e,t=0){for(let n of e)n.writeTo(this,t);return this}finish(e,t){return c.e.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:e,length:t})}}class Q{constructor(e,t,n,i=_){this.type=e,this.from=t,this.to=n,this.children=i}writeTo(e,t){let n=e.content.length;e.writeElements(this.children,t),e.content.push(this.type,this.from+t,this.to+t,e.content.length+4-n)}toTree(e){return new W(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}}class K{constructor(e,t){this.tree=e,this.from=t}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return _}writeTo(e,t){e.nodes.push(this.tree),e.content.push(e.nodes.length-1,this.from+t,this.to+t,-1)}toTree(){return this.tree}}function Z(e,t,n,i){return new Q(e,t,n,i)}const Y={resolve:"Emphasis",mark:"EmphasisMark"},J={resolve:"Emphasis",mark:"EmphasisMark"},G={},ee={};class te{constructor(e,t,n,i){this.type=e,this.from=t,this.to=n,this.side=i}}const ne="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";let ie=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{ie=/[\p{Pc}|\p{Pd}|\p{Pe}|\p{Pf}|\p{Pi}|\p{Po}|\p{Ps}]/u}catch(Fe){}const se={Escape(e,t,n){if(92!=t||n==e.end-1)return-1;let s=e.char(n+1);for(let r=0;r<ne.length;r++)if(ne.charCodeAt(r)==s)return e.append(Z(i.Escape,n,n+2));return-1},Entity(e,t,n){if(38!=t)return-1;let s=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(e.slice(n+1,n+31));return s?e.append(Z(i.Entity,n,n+1+s[0].length)):-1},InlineCode(e,t,n){if(96!=t||n&&96==e.char(n-1))return-1;let s=n+1;for(;s<e.end&&96==e.char(s);)s++;let r=s-n,o=0;for(;s<e.end;s++)if(96==e.char(s)){if(o++,o==r&&96!=e.char(s+1))return e.append(Z(i.InlineCode,n,s+1,[Z(i.CodeMark,n,n+r),Z(i.CodeMark,s+1-r,s+1)]))}else o=0;return-1},HTMLTag(e,t,n){if(60!=t||n==e.end-1)return-1;let s=e.slice(n+1,e.end),r=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(s);if(r)return e.append(Z(i.URL,n,n+1+r[0].length));let o=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(s);if(o)return e.append(Z(i.Comment,n,n+1+o[0].length));let a=/^\?[^]*?\?>/.exec(s);if(a)return e.append(Z(i.ProcessingInstruction,n,n+1+a[0].length));let l=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(s);if(!l)return-1;let h=[];if(e.parser.htmlParser){let t,i=e.parser.htmlParser.startParse(Object(c.h)(e.slice(n,n+1+l[0].length)),0,{});for(;!(t=i.advance()););h=t.children.map(((e,i)=>new K(e,n+t.positions[i])))}return e.append(Z(i.HTMLTag,n,n+1+l[0].length,h))},Emphasis(e,t,n){if(95!=t&&42!=t)return-1;let i=n+1;for(;e.char(i)==t;)i++;let s=e.slice(n-1,n),r=e.slice(i,i+1),o=ie.test(s),a=ie.test(r),l=/\s|^$/.test(s),c=/\s|^$/.test(r),h=!c&&(!a||l||o),p=!l&&(!o||c||a),d=h&&(42==t||!p||o),f=p&&(42==t||!h||a);return e.append(new te(95==t?Y:J,n,i,(d?1:0)|(f?2:0)))},HardBreak(e,t,n){if(92==t&&10==e.char(n+1))return e.append(Z(i.HardBreak,n,n+2));if(32==t){let t=n+1;for(;32==e.char(t);)t++;if(10==e.char(t)&&t>=n+2)return e.append(Z(i.HardBreak,n,t+1))}return-1},Link:(e,t,n)=>91==t?e.append(new te(G,n,n+1,1)):-1,Image:(e,t,n)=>33==t&&91==e.char(n+1)?e.append(new te(ee,n,n+2,1)):-1,LinkEnd(e,t,n){if(93!=t)return-1;for(let s=e.parts.length-1;s>=0;s--){let t=e.parts[s];if(t instanceof te&&(t.type==G||t.type==ee)){if(!t.side||e.skipSpace(t.to)==n&&!/[(\[]/.test(e.slice(n+1,n+2)))return e.parts[s]=null,-1;let r=e.takeContent(s),o=e.parts[s]=re(e,r,t.type==G?i.Link:i.Image,t.from,n+1);if(t.type==G)for(let t=0;t<s;t++){let n=e.parts[t];n instanceof te&&n.type==G&&(n.side=0)}return o.to}}return-1}};function re(e,t,n,s,r){let{text:o}=e,a=e.char(r),l=r;if(t.unshift(Z(i.LinkMark,s,s+(n==i.Image?2:1))),t.push(Z(i.LinkMark,r-1,r)),40==a){let n,s=e.skipSpace(r+1),a=oe(o,s-e.offset,e.offset);a&&(s=e.skipSpace(a.to),n=ae(o,s-e.offset,e.offset),n&&(s=e.skipSpace(n.to))),41==e.char(s)&&(t.push(Z(i.LinkMark,r,r+1)),l=s+1,a&&t.push(a),n&&t.push(n),t.push(Z(i.LinkMark,s,l)))}else if(91==a){let n=le(o,r-e.offset,e.offset,!1);n&&(t.push(n),l=n.to)}return Z(n,s,l,t)}function oe(e,t,n){if(60==e.charCodeAt(t)){for(let s=t+1;s<e.length;s++){let r=e.charCodeAt(s);if(62==r)return Z(i.URL,t+n,s+1+n);if(60==r||10==r)return!1}return null}{let s=0,r=t;for(let t=!1;r<e.length;r++){let n=e.charCodeAt(r);if(m(n))break;if(t)t=!1;else if(40==n)s++;else if(41==n){if(!s)break;s--}else 92==n&&(t=!0)}return r>t?Z(i.URL,t+n,r+n):r==e.length&&null}}function ae(e,t,n){let s=e.charCodeAt(t);if(39!=s&&34!=s&&40!=s)return!1;let r=40==s?41:s;for(let o=t+1,a=!1;o<e.length;o++){let s=e.charCodeAt(o);if(a)a=!1;else{if(s==r)return Z(i.LinkTitle,t+n,o+1+n);92==s&&(a=!0)}}return null}function le(e,t,n,s){for(let r=!1,o=t+1,a=Math.min(e.length,o+999);o<a;o++){let a=e.charCodeAt(o);if(r)r=!1;else{if(93==a)return!s&&Z(i.LinkLabel,t+n,o+1+n);if(s&&!m(a)&&(s=!1),91==a)return!1;92==a&&(r=!0)}}return null}class ce{constructor(e,t,n){this.parser=e,this.text=t,this.offset=n,this.parts=[]}char(e){return e>=this.end?-1:this.text.charCodeAt(e-this.offset)}get end(){return this.offset+this.text.length}slice(e,t){return this.text.slice(e-this.offset,t-this.offset)}append(e){return this.parts.push(e),e.to}addDelimiter(e,t,n,i,s){return this.append(new te(e,t,n,(i?1:0)|(s?2:0)))}addElement(e){return this.append(e)}resolveMarkers(e){for(let n=e;n<this.parts.length;n++){let t=this.parts[n];if(!(t instanceof te&&t.type.resolve&&2&t.side))continue;let i,s=t.type==Y||t.type==J,r=t.to-t.from,o=n-1;for(;o>=e;o--){let e=this.parts[o];if(e instanceof te&&1&e.side&&e.type==t.type&&!(s&&(1&t.side||2&e.side)&&(e.to-e.from+r)%3==0&&((e.to-e.from)%3||r%3))){i=e;break}}if(!i)continue;let a=t.type.resolve,l=[],c=i.from,h=t.to;if(s){let e=Math.min(2,i.to-i.from,r);c=i.to-e,h=t.from+e,a=1==e?"Emphasis":"StrongEmphasis"}i.type.mark&&l.push(this.elt(i.type.mark,c,i.to));for(let e=o+1;e<n;e++)this.parts[e]instanceof Q&&l.push(this.parts[e]),this.parts[e]=null;t.type.mark&&l.push(this.elt(t.type.mark,t.from,h));let p=this.elt(a,c,h,l);this.parts[o]=s&&i.from!=c?new te(i.type,i.from,c,i.side):null,(this.parts[n]=s&&t.to!=h?new te(t.type,h,t.to,t.side):null)?this.parts.splice(n,0,p):this.parts[n]=p}let t=[];for(let n=e;n<this.parts.length;n++){let e=this.parts[n];e instanceof Q&&t.push(e)}return t}findOpeningDelimiter(e){for(let t=this.parts.length-1;t>=0;t--){let n=this.parts[t];if(n instanceof te&&n.type==e)return t}return null}takeContent(e){let t=this.resolveMarkers(e);return this.parts.length=e,t}skipSpace(e){return g(this.text,e-this.offset)+this.offset}elt(e,t,n,i){return"string"==typeof e?Z(this.parser.getNodeType(e),t,n,i):new K(e,t)}}function he(e,t){if(!t.length)return e;if(!e.length)return t;let n=e.slice(),i=0;for(let s of t){for(;i<n.length&&n[i].to<s.to;)i++;if(i<n.length&&n[i].from<s.from){let e=n[i];e instanceof Q&&(n[i]=new Q(e.type,e.from,e.to,he(e.children,[s])))}else n.splice(i++,0,s)}return n}const pe=new WeakMap;function de(e,t){for(let n of e)pe.set(n,t),n instanceof c.e&&n.type.isAnonymous&&de(n.children,t)}const fe=[i.CodeBlock,i.ListItem,i.OrderedList,i.BulletList];class ue{constructor(e,t){this.fragments=e,this.input=t,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,e.length&&(this.fragment=e[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(e,t){for(;this.fragment&&this.fragment.to<=e;)this.nextFragment();if(!this.fragment||this.fragment.from>(e?e-1:0))return!1;if(this.fragmentEnd<0){let e=this.fragment.to;for(;e>0&&10!=this.input.get(e-1);)e--;this.fragmentEnd=e?e-1:0}let n=this.cursor;n||(n=this.cursor=this.fragment.tree.cursor(),n.firstChild());let i=e+this.fragment.offset;for(;n.to<=i;)if(!n.parent())return!1;for(;;){if(n.from>=i)return this.fragment.from<=t;if(!n.childAfter(i))return!1}}matches(e){let t=this.cursor.tree;return t&&pe.get(t)==e}takeNodes(e){let t=this.cursor,n=this.fragment.offset,i=e.lineStart,s=i,r=e.block.children.length,o=s,a=r;for(;;){if(t.to-n>=this.fragmentEnd){if(t.type.isAnonymous&&t.firstChild())continue;break}if(e.addNode(t.tree,t.from-n),t.type.is("Block")&&(fe.indexOf(t.type.id)<0?(s=t.to-n,r=e.block.children.length):(s=o,r=a,o=t.to-n,a=e.block.children.length)),!t.nextSibling())break}for(;e.block.children.length>r;)e.block.children.pop(),e.block.positions.pop();return s-i}}const me=new $(new c.c(U),null,null,Object.keys(B).map((e=>B[e])),Object.keys(B).map((e=>R[e])),Object.keys(B),j,u,Object.keys(se).map((e=>se[e])),Object.keys(se)),ge={resolve:"Strikethrough",mark:"StrikethroughMark"},ke={defineNodes:["Strikethrough","StrikethroughMark"],parseInline:[{name:"Strikethrough",parse:(e,t,n)=>126!=t||126!=e.char(n+1)?-1:e.addDelimiter(ge,n,n+2,!0,!0),after:"Emphasis"}]};function xe(e,t,n=0,i,s=0){let r=0,o=!0,a=-1,l=-1,c=!1,h=()=>{i.push(e.elt("TableCell",s+a,s+l,e.parser.parseInline(t.slice(a,l),s+a)))};for(let p=n;p<t.length;p++){let n=t.charCodeAt(p);124!=n||c?(c||32!=n&&9!=n)&&(a<0&&(a=p),l=p+1):((!o||a>-1)&&r++,o=!1,i&&(a>-1&&h(),i.push(e.elt("TableDelimiter",p+s,p+s+1))),a=l=-1),c=!c&&92==n}return a>-1&&(r++,i&&h()),r}class be{constructor(){this.rows=null}nextLine(e,t,n){if(null==this.rows){let i;if(this.rows=!1,(45==t.next||58==t.next||124==t.next)&&/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/.test(i=t.text.slice(t.pos))){let s=[];xe(e,n.content,0,s,n.start)==xe(e,i,t.pos)&&(this.rows=[e.elt("TableHeader",n.start,n.start+n.content.length,s),e.elt("TableDelimiter",e.lineStart+t.pos,e.lineStart+t.text.length)])}}else if(this.rows){let n=[];xe(e,t.text,t.pos,n,e.lineStart),this.rows.push(e.elt("TableRow",e.lineStart+t.pos,e.lineStart+t.text.length,n))}return!1}finish(e,t){return!!this.rows&&(this.emit(e,t),!0)}emit(e,t){e.addLeafElement(t,e.elt("Table",t.start,t.start+t.content.length,this.rows))}}const ve={defineNodes:[{name:"Table",block:!0},"TableHeader","TableRow","TableCell","TableDelimiter"],parseBlock:[{name:"Table",leaf:(e,t)=>function(e,t){for(let n=t;n<e.length;n++){let t=e.charCodeAt(n);if(124==t)return!0;92==t&&n++}return!1}(t.content,0)?new be:null,before:"SetextHeading"}]};class we{nextLine(){return!1}finish(e,t){return e.addLeafElement(t,e.elt("Task",t.start,t.start+t.content.length,[e.elt("TaskMarker",t.start,t.start+3),...e.parser.parseInline(t.content.slice(3),t.start+3)])),!0}}const ye=[ve,{defineNodes:[{name:"Task",block:!0},"TaskMarker"],parseBlock:[{name:"TaskList",leaf:(e,t)=>/^\[[ xX]\]/.test(t.content)&&"ListItem"==e.parser.nodeSet.types[e.block.type].name?new we:null,after:"SetextHeading"}]},ke];function Se(e,t,n){return(i,s,r)=>{if(s!=e||i.char(r+1)==e)return-1;let o=[i.elt(n,r,r+1)];for(let a=r+1;a<i.end;a++){let s=i.char(a);if(s==e)return i.addElement(i.elt(t,r,a+1,o.concat(i.elt(n,a,a+1))));if(92==s&&o.push(i.elt("Escape",a,2+a++)),m(s))break}return-1}}const Ce={defineNodes:["Superscript","SuperscriptMark"],parseInline:[{name:"Superscript",parse:Se(94,"Superscript","SuperscriptMark")}]},Le={defineNodes:["Subscript","SubscriptMark"],parseInline:[{name:"Subscript",parse:Se(126,"Subscript","SubscriptMark")}]},Te={defineNodes:["Emoji"],parseInline:[{name:"Emoji",parse(e,t,n){let i;return 58==t&&(i=/^[a-zA-Z_0-9]+:/.exec(e.slice(n+1,e.end)))?e.addElement(e.elt("Emoji",n,n+1+i[0].length)):-1}}]};var Ee=n("PQU8");const Ae=Object(a.defineLanguageFacet)({block:{open:"\x3c!--",close:"--\x3e"}}),Ie=me.configure({props:[Object(l.styleTags)({"Blockquote/...":l.tags.quote,HorizontalRule:l.tags.contentSeparator,"ATXHeading1/... SetextHeading1/...":l.tags.heading1,"ATXHeading2/... SetextHeading2/...":l.tags.heading2,"ATXHeading3/...":l.tags.heading3,"ATXHeading4/...":l.tags.heading4,"ATXHeading5/...":l.tags.heading5,"ATXHeading6/...":l.tags.heading6,"Comment CommentBlock":l.tags.comment,Escape:l.tags.escape,Entity:l.tags.character,"Emphasis/...":l.tags.emphasis,"StrongEmphasis/...":l.tags.strong,"Link/... Image/...":l.tags.link,"OrderedList/... BulletList/...":l.tags.list,"BlockQuote/...":l.tags.quote,"InlineCode/... CodeBlock FencedCode":l.tags.monospace,URL:l.tags.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":l.tags.processingInstruction,"CodeInfo LinkLabel":l.tags.labelName,LinkTitle:l.tags.string,Paragraph:l.tags.content}),a.foldNodeProp.add((e=>{if(e.is("Block")&&!e.is("Document"))return(e,t)=>({from:t.doc.lineAt(e.from).to,to:e.to})})),a.indentNodeProp.add({Document:()=>null}),a.languageDataProp.add({Document:Ae})],htmlParser:Ee.htmlLanguage.parser.configure({dialect:"noMatch"})}),Me=Be(Ie),Pe=Be(Ie.configure([ye,Le,Ce,Te,{props:[Object(l.styleTags)({"TableDelimiter SubscriptMark SuperscriptMark StrikethroughMark":l.tags.processingInstruction,"TableHeader/...":l.tags.heading,"Strikethrough/...":l.tags.strikethrough,TaskMarker:l.tags.atom,Task:l.tags.list,Emoji:l.tags.character,"Subscript Superscript":l.tags.special(l.tags.content),TableCell:l.tags.content})]}]));function Be(e){return new a.Language(Ae,e,e.nodeSet.types.find((e=>"Document"==e.name)))}function He(e,t){return t.sliceString(e.from,e.from+50)}function Oe(e,t,n){let i=[];for(let o=e;o&&"Document"!=o.name;o=o.parent)"ListItem"!=o.name&&"Blockquote"!=o.name||i.push(o);let s=[],r=0;for(let o=i.length-1;o>=0;o--){let e,a=i[o];if("Blockquote"==a.name&&(e=/^\s*> ?/.exec(t.slice(r))))s.push({from:r,string:e[0],node:a}),r+=e[0].length;else if("ListItem"==a.name&&"OrderedList"==a.parent.name&&(e=/^\s*\d+([.)])\s*/.exec(He(a,n)))){let n=e[1].length>=4?e[0].length-e[1].length+1:e[0].length;s.push({from:r,string:t.slice(r,r+n).replace(/\S/g," "),node:a}),r+=n}else if("ListItem"==a.name&&"BulletList"==a.parent.name&&(e=/^\s*[-+*] (\s*)/.exec(He(a,n)))){let n=e[1].length>=4?e[0].length-e[1].length:e[0].length;s.push({from:r,string:t.slice(r,r+n).replace(/\S/g," "),node:a}),r+=n}}return s}const Ne=({state:e,dispatch:t})=>{let n=Object(a.syntaxTree)(e),i=null,o=e.changeByRange((t=>{if(t.empty&&Pe.isActiveAt(e,t.from)){let i=e.doc.lineAt(t.from),o=Oe(n.resolve(t.from,-1),i.text,e.doc),a=t.from,l=[];if(o.length){let n=o[o.length-1],r=n.from+n.string.length,c=t.from-i.from>=r&&!/\S/.test(i.text.slice(r,t.from-i.from));if(c){let e=/List/.test(n.node.name)?n.from:r;for(;e>0&&/\s/.test(i.text[e-1]);)e--;a=i.from+e}if("ListItem"==n.node.name){if(c&&i.from>0&&!/[^\s>]/.test(e.doc.lineAt(i.from-1).text))return{range:s.EditorSelection.cursor(a),changes:{from:a,to:t.from}};a<t.from&&n.node.parent.from==n.node.from?n.string="":(n.node.from>=i.from?n.string=i.text.slice(n.from,n.from+n.string.length):n.string=/^\s*/.exec(i.text)[0].slice(0,n.string.length),"OrderedList"==n.node.parent.name&&a==t.from&&(n.string=n.string.replace(/\d+/,(e=>+e+1)),function(e,t,n){for(let i=-1,s=e;;){if("ListItem"==s.name){let e=/^(\s*)(\d+)(?=[.)])/.exec(t.sliceString(s.from,s.from+10));if(!e)return;let r=+e[2];if(i>=0){if(r!=i+1)return;n.push({from:s.from+e[1].length,to:s.from+e[0].length,insert:String(i+2)})}i=r}let e=s.nextSibling;if(!e)break;s=e}}(n.node,e.doc,l)))}}let c=o.map((e=>e.string)).join("");return t.from-i.from<c.length&&(c=""),l.push({from:a,to:t.from,insert:r.a.of(["",c])}),{range:s.EditorSelection.cursor(a+1+c.length),changes:l}}return i={range:t}}));return!i&&(t(e.update(o,{scrollIntoView:!0})),!0)},Re=({state:e,dispatch:t})=>{let n=Object(a.syntaxTree)(e),i=null,r=e.changeByRange((t=>{if(t.empty&&Pe.isActiveAt(e,t.from)){let i=e.doc.lineAt(t.from),r=Oe(n.resolve(t.from,-1),i.text,e.doc);if(r.length){let e=r[r.length-1],n=e.from+e.string.length;if(t.from>n+i.from&&!/\S/.test(i.text.slice(n,t.from-i.from)))return{range:s.EditorSelection.cursor(n+i.from),changes:{from:n+i.from,to:t.from}};if(t.from-i.from==n){let r=i.from+e.from;return"ListItem"==e.node.name&&e.node.parent.from<e.node.from&&/\S/.test(i.text.slice(e.from,n))?{range:t,changes:{from:r,to:r+e.string.length,insert:e.string}}:{range:s.EditorSelection.cursor(r),changes:{from:r,to:t.from}}}}}return i={range:t}}));return!i&&(t(e.update(r,{scrollIntoView:!0})),!0)},je=[{key:"Enter",run:Ne},{key:"Backspace",run:Re}];function De(e={}){let{codeLanguages:t,defaultCodeLanguage:n,addKeymap:i=!0,base:{parser:r}=Me}=e,l=e.extensions?[e.extensions]:[];if(!(r instanceof $))throw new RangeError("Base parser provided to `markdown` should be a Markdown parser");var c,h;return(t||n)&&l.push((c=t||[],h=n,{codeParser(e){let t=e&&a.LanguageDescription.matchLanguageName(c,e,!0);return t?t.support?t.support.language.parser:a.EditorParseContext.getSkippingParser(t.load()):h?h.parser:null}})),new a.LanguageSupport(Be(r.configure(l)),i?s.Prec.extend(o.keymap.of(je)):[])}},fK0Z:function(e,t,n){"use strict";n.r(t),n.d(t,"hoverTooltip",(function(){return d})),n.d(t,"showTooltip",(function(){return h})),n.d(t,"tooltips",(function(){return c}));var i=n("AtEE"),s=n("4eob");const r="undefined"!=typeof navigator&&!/Edge\/(\d+)/.exec(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),o="-10000px",a=i.ViewPlugin.fromClass(class{constructor(e){this.view=e,this.inView=!0,this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.input=e.state.facet(h),this.tooltips=this.input.filter((e=>e)),this.tooltipViews=this.tooltips.map((e=>this.createTooltip(e)))}update(e){let t=e.state.facet(h);if(t==this.input)for(let n of this.tooltipViews)n.update&&n.update(e);else{let n=t.filter((e=>e)),i=[];for(let t=0;t<n.length;t++){let s=n[t],r=-1;if(s){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==s.create&&(r=e)}if(r<0)i[t]=this.createTooltip(s);else{let n=i[t]=this.tooltipViews[r];n.update&&n.update(e)}}}for(let e of this.tooltipViews)i.indexOf(e)<0&&e.dom.remove();this.input=t,this.tooltips=n,this.tooltipViews=i,this.maybeMeasure()}}createTooltip(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip"),e.class&&t.dom.classList.add(e.class),t.dom.style.top=o,this.view.dom.appendChild(t.dom),t.mount&&t.mount(this.view),t}destroy(){for(let{dom:e}of this.tooltipViews)e.remove()}readMeasure(){return{editor:this.view.dom.getBoundingClientRect(),pos:this.tooltips.map((e=>this.view.coordsAtPos(e.pos))),size:this.tooltipViews.map((({dom:e})=>e.getBoundingClientRect())),innerWidth:window.innerWidth,innerHeight:window.innerHeight}}writeMeasure(e){let{editor:t}=e;for(let n=0;n<this.tooltipViews.length;n++){let s=this.tooltips[n],a=this.tooltipViews[n],{dom:l}=a,c=e.pos[n],h=e.size[n];if(!c||c.bottom<=t.top||c.top>=t.bottom||c.right<=t.left||c.left>=t.right){l.style.top=o;continue}let p=h.right-h.left,d=h.bottom-h.top,f=this.view.textDirection==i.Direction.LTR?Math.min(c.left,e.innerWidth-p):Math.max(0,c.left-p),u=!!s.above;!s.strictSide&&(u?c.top-(h.bottom-h.top)<0:c.bottom+(h.bottom-h.top)>e.innerHeight)&&(u=!u),r?(l.style.top=(u?c.top-d:c.bottom)-t.top+"px",l.style.left=f-t.left+"px",l.style.position="absolute"):(l.style.top=(u?c.top-d:c.bottom)+"px",l.style.left=f+"px"),l.classList.toggle("cm-tooltip-above",u),l.classList.toggle("cm-tooltip-below",!u),a.positioned&&a.positioned()}}maybeMeasure(){this.tooltips.length&&((this.view.inView||this.inView)&&this.view.requestMeasure(this.measureReq),this.inView=this.view.inView)}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),l=i.EditorView.baseTheme({".cm-tooltip":{position:"fixed",zIndex:100},"&light .cm-tooltip":{border:"1px solid #ddd",backgroundColor:"#f5f5f5"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"}});function c(){return[]}const h=s.Facet.define({enables:[a,l]});class p{constructor(e,t,n,i){this.view=e,this.source=t,this.field=n,this.setHover=i,this.lastMouseMove=null,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((()=>this.startHover()),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now(),t=this.lastMouseMove;e-t.timeStamp<750?this.hoverTimeout=setTimeout(this.checkHover,750-(e-t.timeStamp)):this.startHover()}startHover(){var e;clearTimeout(this.restartTimeout);let t=this.lastMouseMove,n={x:t.clientX,y:t.clientY},s=this.view.contentDOM.contains(t.target)?this.view.posAtCoords(n):null;if(null==s)return;let r=this.view.coordsAtPos(s);if(null==r||n.y<r.top||n.y>r.bottom||n.x<r.left-this.view.defaultCharacterWidth||n.x>r.right+this.view.defaultCharacterWidth)return;let o=this.view.bidiSpans(this.view.state.doc.lineAt(s)).find((e=>e.from<=s&&e.to>=s)),a=o&&o.dir==i.Direction.RTL?-1:1,l=this.source(this.view,s,n.x<r.left?-a:a);if(null===(e=l)||void 0===e?void 0:e.then){let e=this.pending={pos:s};l.then((t=>{this.pending==e&&(this.pending=null,t&&this.view.dispatch({effects:this.setHover.of(t)}))}),(e=>Object(i.logException)(this.view.state,e,"hover tooltip")))}else l&&this.view.dispatch({effects:this.setHover.of(l)})}mousemove(e){var t;this.lastMouseMove=e,this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,750));let n=this.active;if(n&&!function(e){for(let t=e;t;t=t.parentNode)if(1==t.nodeType&&t.classList.contains("cm-tooltip"))return!0;return!1}(e.target)||this.pending){let{pos:i}=n||this.pending,s=null!==(t=null===n||void 0===n?void 0:n.end)&&void 0!==t?t:i;(i==s?this.view.posAtCoords({x:e.clientX,y:e.clientY})==i:function(e,t,n,i,s,r){let o=document.createRange(),a=e.domAtPos(t),l=e.domAtPos(n);o.setEnd(l.node,l.offset),o.setStart(a.node,a.offset);let c=o.getClientRects();o.detach();for(let h=0;h<c.length;h++){let e=c[h];if(Math.max(e.top-s,s-e.bottom,e.left-i,i-e.right)<=r)return!0}return!1}(this.view,i,s,e.clientX,e.clientY,6))||(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function d(e,t={}){const n=s.StateEffect.define(),r=s.StateField.define({create:()=>null,update(e,i){if(e&&t.hideOnChange&&(i.docChanged||i.selection))return null;for(let t of i.effects)if(t.is(n))return t.value;if(e&&i.docChanged){let t=i.changes.mapPos(e.pos,-1,s.MapMode.TrackDel);if(null==t)return null;let n=Object.assign(Object.create(null),e);return n.pos=t,null!=e.end&&(n.end=i.changes.mapPos(e.end)),n}return e},provide:e=>h.from(e)});return[r,i.ViewPlugin.define((t=>new p(t,e,r,n)))]}}}]);
//# sourceMappingURL=c8f7fe3b0e41be846d5687592cf2018ff6e22687.ec9d612e37b998735bcf.js.map